"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}new(function(){function n(t,e){_classCallCheck(this,n),this.container=document.getElementById(t),this.shopList=document.createElement("table"),this.cartList=document.createElement("table"),this.products=e,this.cartProducts=this.getStorage()||[],this.container.appendChild(this.shopList),this.container.appendChild(this.cartList)}return _createClass(n,[{key:"setStorage",value:function(t){localStorage.setItem("cart",JSON.stringify(t))}},{key:"getStorage",value:function(){return JSON.parse(localStorage.getItem("cart"))||[]}},{key:"init",value:function(){this.initShopList(),0<this.getStorage().length&&this.renderCartList()}},{key:"initShopList",value:function(){var e="<thead>\n                        <tr>\n                            <th>商品ID</th>\n                            <th>商品名称</th>\n                            <th>商品价格</th>\n                            <th>商品图片</th>\n                            <th>操作</th>\n                        </tr>\n                       </thead>";e+="<tbody>",this.products.forEach(function(t){e+="<tr>\n                            <td>".concat(t.id,"</td>\n                            <td>").concat(t.name,"</td>\n                            <td>").concat(t.price,'</td>\n                            <td><img src="').concat(t.pic,'"></td>\n                            <td><a href="javascript:;" class="addCart">加入购物车</td>\n                        </tr>')}),this.shopList.innerHTML=e,this.addCartListEvent()}},{key:"addCartListEvent",value:function(){var n=this;this.container.querySelectorAll(".addCart").forEach(function(t){t.onclick=function(){var t=this.parentNode.parentNode,e={name:t.children[1].innerHTML,price:t.children[2].innerHTML,pic:t.children[3].innerHTML,id:t.children[0].innerHTML};n.addToCartProducts(e),n.renderCartList()}})}},{key:"addToCartProducts",value:function(t){this.cartProducts=this.getStorage();for(var e=0;e<this.cartProducts.length;e++)if(this.cartProducts[e].id==t.id)return this.cartProducts[e].num++,void this.setStorage(this.cartProducts);t.num=1,this.cartProducts.push(t),this.setStorage(this.cartProducts)}},{key:"renderCartList",value:function(){var e="<thead>\n                        <tr>\n                            <th>商品ID</th>\n                            <th>商品名称</th>\n                            <th>商品价格</th>\n                            <th>商品图片</th>\n                            <th>商品数量</th>\n                            <th>操作</th>\n                        </tr>\n                      </thead>";e+="<tbody>",this.getStorage().forEach(function(t){e+="<tr>\n                        <td>".concat(t.id,"</td> \n                        <td>").concat(t.name,"</td> \n                        <td>").concat(t.price,"</td> \n                        <td>\n                            ").concat(t.pic,'\n                        </td> \n                        <td class="change">\n                            <span class="jian">-</span>\n                            ').concat(t.num,'\n                            <span class="jia">+</span>\n                        </td> \n                        <td><a href="javascript:;" class="del">删除</a></td> \n                        </tr>')}),e+="</tbody>",this.cartList.innerHTML=e,this.deleteProductEvent(),this.changeNwmEvet()}},{key:"changeNwmEvet",value:function(){var n=this;this.container.querySelectorAll(".change").forEach(function(t){t.onclick=function(t){t.target;var e=this.parentNode.children[0].innerHTML;"jian"==t.target.className&&n.jianNum(e),"jia"==t.target.className&&(n.jiaNum(e),n.renderCartList())}})}},{key:"jianNum",value:function(t){for(var e=this.getStorage(),n=0;n<e.length;n++)if(e[n].id==t)return e[n].num--,this.setStorage(e),this.renderCartList(),e[n].num<=0?void this.deleteFromCartProducts(t):void 0}},{key:"jiaNum",value:function(t){for(var e=this.getStorage(),n=0;n<e.length;n++)if(e[n].id==t)return e[n].num++,void this.setStorage(e)}},{key:"deleteProductEvent",value:function(){var e=this;this.container.querySelectorAll(".del").forEach(function(t){t.onclick=function(){var t=this.parentNode.parentNode.children[0].innerHTML;e.deleteFromCartProducts(t)}})}},{key:"deleteFromCartProducts",value:function(e){this.cartProducts=this.getStorage(),this.cartProducts=this.cartProducts.filter(function(t){return t.id!=e}),this.setStorage(this.cartProducts),this.renderCartList(),this.getStorage().length<1&&(this.cartList.innerHTML="")}}]),n}())("container",[{id:32145,name:"罗技 WONDERBOOM无线蓝牙音箱 牛油果绿",price:799,pic:"https://images.wincheers.net/UpLoad/logitech/xx/nyg-wonderboom-01.png"},{id:53215,name:"罗技 WONDERBOOM无线蓝牙音箱 混凝土黑",price:799,pic:"https://images.wincheers.net/UpLoad/logitech/xx/hnt-wonderboom-01.png"},{id:78542,name:"罗技 G502 LIGHTSPEED 创世者无线游戏鼠标",price:899,pic:"https://images.wincheers.net/UpLoad/Web/ProductImg/2019-05-29/NEW_XL/G502wx.png"},{id:79462,name:"罗技 G903 LIGHTSPEED 无线游戏鼠标  新一代HERO传感器",price:799,pic:"https://images.wincheers.net/UpLoad/Web/ProductImg/2019-02-14/NEW_XL/G903-01.png"},{id:97162,name:"罗技 G610背光机械游戏键盘 青轴",price:549,pic:"https://images.wincheers.net/UpLoad/Web/ProductImg/2019-04-19/NEW_XL/G610-01.png"},{id:97403,name:"罗技 G813 RGB 机械游戏键盘 (GL-Tactile)",price:1099,pic:"https://images.wincheers.net/UpLoad/Web/ProductImg/2019-08-28/NEW_XL/g813.png"},{id:65785,name:"罗技 Zone Wireless无线蓝牙耳机",price:2499,pic:"https://images.wincheers.net/UpLoad/Web/ProductImg/2019-09-04/NEW_XL/zone-5.png"},{id:48792,name:"罗技 G431 7.1环绕声游戏耳机麦克风",price:549,pic:"https://images.wincheers.net/UpLoad/Web/ProductImg/2019-04-11/NEW_XL/g43103.png"}]).init();